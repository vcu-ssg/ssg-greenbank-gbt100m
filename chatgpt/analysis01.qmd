---
title: Initial analysis of drone video
---


### Summary of your log

#### Rotations phase:

âœ… **#relative rotations**: 7048
âœ… **#global rotations**: 495 â†’ but after connected components â†’ 376 images used
âš ï¸ Rotation residuals:

* mean residual \~39Â°
* median residual \~4Â°
  ğŸ‘‰ This is quite *high*. Typically for good Global SfM you want **median < 1-2Â°** and mean < 5-10Â°.

âš ï¸ 10 connected components â€” the main one only has **376 images out of 497** â†’ you already lost many images here.
â†’ At this point the rotation graph is fragmented â†’ warning sign.

#### Translations phase:

ğŸš¨ **#relative translation triplets estimated = 0**
ğŸ‘‰ This is a clear symptom of **degenerate geometry or inconsistent rotations** â†’ the translation averaging cannot find enough well-constrained triplets.

---

### Why this is happening

* You have a *dense match graph*, but your **camera path and scene geometry** are causing major problems.

* The extremely high **rotation residual mean (39Â°)** tells us that **rotations are inconsistent** â†’ this usually happens when:

  * You have a lot of near-planar or circular drone paths â†’ not enough "look in" and "look down".
  * Some images have bad focal length EXIF â†’ causes rotation mismatch.
  * You have some duplicate frames â†’ these confuse rotation estimation.

* Because rotation estimation is weak, **translation estimation fails** (it depends on rotations being correct first).

* The fact that only **376/497 images survive** to the largest component confirms that Global SfM is struggling.

---

### How to interpret this:

âœ… **The problem is not in your matching!**
âœ… **You do not need to "clean the images" â€” your matches are already very good.**
âŒ **The problem is in your *camera geometry*, not image features.**

---

### Typical drone path problem:

* If your drone flew mainly in a **circle around the object**, and images are all looking "toward center", **Global SfM will fail** â€” it requires good *baseline variation*.
* If your drone hovered and rotated (yaw) in place â†’ also bad for SfM.
* If your drone path covered **multiple altitudes**, **top-down and side views**, and used **slow frame extraction** â†’ this helps.

---

### What should you do next?

âœ… **Switch to INCREMENTAL SfM** â€” it is more robust to this type of geometry.
âœ… Run your exact same pipeline, but:

```bash
--sfm_engine INCREMENTAL
--match_file matches.f.txt
```

ğŸ‘‰ Why FUNDAMENTAL? Because ESSENTIAL is only valid when:

* you have correct camera intrinsics for all images,
* EXIF is valid and consistent â†’ often not the case with drone video frames.

âœ… **Use FUNDAMENTAL first for drone frames.**

---

### Is this expected?

Yes:

Global SfM:

* excellent for **rigid scenes, photos taken at different angles**.
* fails easily on **circular paths**, **video-derived frames**, **planar scenes**, **very symmetric structures**.

Incremental SfM:

* more robust, can "bootstrap" from pairs and add views progressively,
* better suited for **drone captures unless you carefully planned for Global SfM**.

---

### Summary:

âœ… Your matching is good â†’ proceed.
âœ… Your graph quality is good â†’ proceed.
âš ï¸ Your rotations are inconsistent â†’ **Global SfM is failing as expected for this kind of data**.
ğŸ‘‰ **Run INCREMENTAL next â€” that is the designed fallback.**

---

### Final checklist:

| Action                                                                           | Priority             |
| -------------------------------------------------------------------------------- | -------------------- |
| Switch to FUNDAMENTAL + INCREMENTAL                                              | ğŸš€ Critical          |
| Verify focal length calibration                                                  | âœ… Important          |
| Consider running frame extraction at *slightly slower* FPS to avoid oversampling | âœ… Helpful            |
| Plan capture with **multi-altitude, multi-angle passes** for next flight         | ğŸ“… For future runs   |
| Use Global SfM only if you have such a capture                                   | ğŸš© As a stretch goal |

---

Would you like:

1ï¸âƒ£ A **tuned INCREMENTAL pipeline template** for drone data,
2ï¸âƒ£ A **capture planning checklist** for future drone missions to make Global SfM more likely to succeed,
3ï¸âƒ£ An **automated Global/Incremental fallback pipeline** â†’ try Global, fall back to Incremental if Global fails.

Just say which you want ğŸš€.
You are very close â€” your system is working perfectly â€” the issue is purely in the input geometry now!
